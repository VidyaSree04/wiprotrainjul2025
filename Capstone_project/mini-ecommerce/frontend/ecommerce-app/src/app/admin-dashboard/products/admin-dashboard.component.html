<!-- ================== Add Product Button ================== -->
<div class="header">
  <button class="add-product-btn" (click)="toggleAddProduct()">Add Product</button>
</div>

<!-- ================== Add Product Modal ================== -->
<div *ngIf="showAddProduct" class="modal">
  <div class="modal-content">
    <h3>Add New Product</h3>
    <form class="add-product-form" (ngSubmit)="addProduct()">
      <!-- Row 1: Name & Category -->
      <div class="form-row">
        <div class="form-group">
          <label>Product Name</label>
          <input type="text" [(ngModel)]="newProduct.prodName" name="prodName" required />
        </div>
        <div class="form-group">
          <label>Category</label>
          <select [(ngModel)]="newProduct.prodCat" name="prodCat" required>
            <option value="">--Select--</option>
            <option value="Electronics">Electronics</option>
            <option value="Fashion">Fashion</option>
            <option value="Home and Kitchen">Home and Kitchen</option>
            <option value="Books">Books</option>
          </select>
        </div>
      </div>

      <!-- Row 2: Make & Description -->
      <div class="form-row">
        <div class="form-group">
          <label>Make</label>
          <input type="text" [(ngModel)]="newProduct.make" name="make" />
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea [(ngModel)]="newProduct.prodDesc" name="prodDesc" rows="2"></textarea>
        </div>
      </div>

      <!-- Row 3: Price & Quantity -->
      <div class="form-row">
        <div class="form-group">
          <label>Price</label>
          <input type="number" [(ngModel)]="newProduct.price" name="price" required />
        </div>
        <div class="form-group">
          <label>Available Quantity</label>
          <input type="number" [(ngModel)]="newProduct.availableQty" name="availableQty" required />
        </div>
      </div>

      <!-- Row 4: UOM & Rating -->
      <div class="form-row">
        <div class="form-group">
          <label>UOM</label>
          <select [(ngModel)]="newProduct.uom" name="uom" required>
            <option value="">--Select--</option>
            <option value="Kg">Kg</option>
            <option value="Piece">Piece</option>
            <option value="Litre">Litre</option>
          </select>
        </div>
        <div class="form-group">
          <label>Rating</label>
          <input type="number" [(ngModel)]="newProduct.prodRating" name="prodRating" step="0.1" />
        </div>
      </div>

      <!-- Row 5: Image & Date -->
      <div class="form-row">
        <div class="form-group">
          <label>Image URL</label>
          <input type="text" [(ngModel)]="newProduct.imageURL" name="imageURL" />
        </div>
        <div class="form-group">
          <label>Date of Manufacture</label>
          <input type="date" [(ngModel)]="newProduct.dateOfManufacture" name="dateOfManufacture" />
        </div>
      </div>

      <div class="modal-buttons">
        <button type="submit" class="submit-btn">Add</button>
        <button type="button" class="cancel-btn" (click)="toggleAddProduct()">Cancel</button>
      </div>
    </form>
  </div>
</div>

<!-- ================== Existing Products Table ================== -->
<table class="product-table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Image</th>
      <th>Name</th>
      <th>Category</th>
      <th>Make</th>
      <th>Price</th>
      <th>Qty</th>
      <th>UOM</th>
      <th>Rating</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let product of products">
      <td>{{ product.id }}</td>
      <td><img [src]="product.imageURL" width="50" /></td>
      <td>{{ product.prodName }}</td>
      <td>{{ product.prodCat }}</td>
      <td>{{ product.make }}</td>
      <td>{{ product.price }}</td>
      <td>{{ product.availableQty }}</td>
      <td>{{ product.uom }}</td>
      <td>{{ product.prodRating }}</td>
      <td>
        <button type="button" class="edit-btn" (click)="startEdit(product)">Edit</button>
        <button type="button" class="delete-btn" (click)="deleteProduct(product.id!)">Delete</button>
      </td>
    </tr>
  </tbody>
</table>

<!-- ================== Edit Product Modal ================== -->
<div *ngIf="editingProduct" class="modal">
  <div class="modal-content">
    <h3>Edit Product: {{ editingProduct.prodName }}</h3>
    <form class="add-product-form" (ngSubmit)="updateProduct()">
      <!-- same form rows as Add Product -->
      <div class="form-row">
        <div class="form-group">
          <label>Name</label>
          <input type="text" [(ngModel)]="editingProduct.prodName" name="editProdName" required />
        </div>
        <div class="form-group">
          <label>Category</label>
          <select [(ngModel)]="editingProduct.prodCat" name="editProdCat" required>
            <option value="">--Select--</option>
            <option value="Electronics">Electronics</option>
            <option value="Fashion">Fashion</option>
            <option value="Home and Kitchen">Home and Kitchen</option>
            <option value="Books">Books</option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Make</label>
          <input type="text" [(ngModel)]="editingProduct.make" name="editMake" />
        </div>
        <div class="form-group">
          <label>Description</label>
          <textarea [(ngModel)]="editingProduct.prodDesc" name="editProdDesc" rows="2"></textarea>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Price</label>
          <input type="number" [(ngModel)]="editingProduct.price" name="editPrice" />
        </div>
        <div class="form-group">
          <label>Quantity</label>
          <input type="number" [(ngModel)]="editingProduct.availableQty" name="editQty" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>UOM</label>
          <select [(ngModel)]="editingProduct.uom" name="editUOM" required>
            <option value="">--Select--</option>
            <option value="Kg">Kg</option>
            <option value="Piece">Piece</option>
            <option value="Litre">Litre</option>
          </select>
        </div>
        <div class="form-group">
          <label>Rating</label>
          <input type="number" [(ngModel)]="editingProduct.prodRating" name="editRating" step="0.1" />
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label>Image URL</label>
          <input type="text" [(ngModel)]="editingProduct.imageURL" name="editImage" />
        </div>
        <div class="form-group">
          <label>Date of Manufacture</label>
          <input type="date" [(ngModel)]="editingProduct.dateOfManufacture" name="editDate" />
        </div>
      </div>

      <div class="modal-buttons">
        <button type="submit" class="submit-btn">Update</button>
        <button type="button" class="cancel-btn" (click)="editingProduct = null">Cancel</button>
      </div>
    </form>
  </div>
</div>
